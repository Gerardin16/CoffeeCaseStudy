--Coffee Type Table--
CREATE TABLE COFFEE_TYPE 
(COFFEE_ID NUMBER(5), 
COFFEE_NAME VARCHAR2(20),
COFFEE_NAME_PRICE NUMBER(5,2), 
CONSTRAINT PK_Coffeeid PRIMARY KEY(COFFEE_ID)) ;

--Coffee Size Table--
CREATE TABLE COFFEE_SIZE 
(COFFEE_SIZE_ID NUMBER(5), 
COFFEE_SIZE VARCHAR2(20),
COFFEE_SIZE_PRICE NUMBER(5,2), 
CONSTRAINT PK_Coffeesizeid PRIMARY KEY(COFFEE_SIZE_ID)) ;

--Coffee Addons Table--
CREATE TABLE COFFEE_ADDONS 
(COFFEE_ADDON_ID NUMBER(5), 
COFFEE_ADDON_NAME VARCHAR2(20),
COFFEE_ADDON_PRICE NUMBER(5,2), 
CONSTRAINT PK_Coffeeaddonid PRIMARY KEY(COFFEE_ADDON_ID)) ;

--Coffee Order Table--
CREATE TABLE COFFEE_ORDER
( ORDER_ID number(10) NOT NULL,  
  ORDER_NUMBER varchar2(50) NOT NULL,  
  COFFEE_ID number(10) NOT NULL, 
  COFFEE_SIZE_ID number(10) NOT NULL,
  COFFEE_ADDON_ID number(10) NOT NULL,
  CONSTRAINT coffee_order_pk PRIMARY KEY(ORDER_ID),
  CONSTRAINT order_coffeetype_fk FOREIGN KEY(COFFEE_ID)
  REFERENCES COFFEE_TYPE(COFFEE_ID),
  CONSTRAINT order_coffeesize_fk FOREIGN KEY(COFFEE_SIZE_ID)
  REFERENCES COFFEE_SIZE(COFFEE_SIZE_ID),
  CONSTRAINT order_coffeeaddon_fk FOREIGN KEY(COFFEE_ADDON_ID)
  REFERENCES COFFEE_ADDONS(COFFEE_ADDON_ID),
  CONSTRAINT order_ordernum_uk UNIQUE(ORDER_NUMBER)
);

--Bill Order Table--
CREATE TABLE BILL_ORDER
(BILL_ID number(10) NOT NULL,  
 ORDER_NUMBER varchar2(50) NOT NULL,  
 VOUCHER_ID number(10),
  TOTAL_BILL_amt number(5,2),
  CONSTRAINT coffee_bill_pk PRIMARY KEY (BILL_ID) ,
  CONSTRAINT order_coffeeorder_fk FOREIGN KEY (ORDER_NUMBER)
  REFERENCES COFFEE_ORDER(ORDER_NUMBER),
  CONSTRAINT order_coffeevoucher_fk FOREIGN KEY (VOUCHER_ID)
  REFERENCES VOUCHER(VOUCHER_ID)
);
 --INSERT STATEMENTS COFFEE_TYPE--
INSERT INTO COFFEE_TYPE VALUES(110,'MOCHA',140);
INSERT INTO COFFEE_TYPE VALUES(111,'LATTE',240);
INSERT INTO COFFEE_TYPE VALUES(113,'AMERICANO',270);

--INSERT STATEMENTS COFFEE_SIZE--
INSERT INTO COFFEE_SIZE VALUES(200,'SMALL',175);
INSERT INTO COFFEE_SIZE VALUES(201,'MEDIUM',250);
INSERT INTO COFFEE_SIZE VALUES(202,'LARGE',275);

 --INSERT STATEMENTS COFFEE_ADDONS--
INSERT INTO COFFEE_ADDONS VALUES(301,'BUTTER',50);
INSERT INTO COFFEE_ADDONS VALUES(302,'CREAM',20);
INSERT INTO COFFEE_ADDONS VALUES(303,'HAZELNUTS',60);

 --INSERT STATEMENTS VOUCHER--
INSERT INTO COFFEE_VOUCHER VALUES(401,'BZH30','30% OFFER');
INSERT INTO COFFEE_VOUCHER VALUES(402,'BZH10','10% OFFER');
INSERT INTO COFFEE_VOUCHER VALUES(403,'BZH20','20% OFFER');

---- PERSON TABLE CREATION, INSERT and SELECT using sequence, Trigger------
CREATE SEQUENCE pid_seq;

CREATE TRIGGER pid
BEFORE INSERT ON person
FOR EACH ROW
BEGIN
  SELECT pid_seq.nextval
  INTO :new.pid
  FROM dual;
END;

CREATE TABLE PERSON 
(pid number(5) primary key, 
person_name varchar2(25) NOT NULL,
person_phoneno number(10) NOT NULL,
CONSTRAINT person_phoneno UNIQUE(person_phoneno));

SELECT pid, person_name, person_phoneno
FROM person
ORDER BY pid;

INSERT INTO person (person_name, person_phoneno)
VALUES ('Swetha', 9000088888);
INSERT INTO person (person_name, person_phoneno)
VALUES ('Priya', 8880099999);
INSERT INTO person (person_name, person_phoneno)
VALUES ('Rohan', 9941219888);
INSERT INTO person (person_name, person_phoneno)
VALUES ('Surya', 9876548888);
INSERT INTO person (person_name, person_phoneno)
VALUES ('Sujata', 9000080000);
